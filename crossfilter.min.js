!function(r){function n(r){return r}function t(r,n){for(var t=0,e=n.length,u=Array(e);e>t;++t)u[t]=r[n[t]];return u}function e(r){function n(n,t,e,u){for(;u>e;){var o=e+u>>>1;r(n[o])<t?e=o+1:u=o}return e}function t(n,t,e,u){for(;u>e;){var o=e+u>>>1;t<r(n[o])?u=o:e=o+1}return e}return t.right=t,t.left=n,t}function u(r){function n(r,n,t){for(var u=t-n,o=(u>>>1)+1;--o>0;)e(r,o,u,n);return r}function t(r,n,t){for(var u,o=t-n;--o>0;)u=r[n],r[n]=r[n+o],r[n+o]=u,e(r,1,o,n);return r}function e(n,t,e,u){for(var o,f=n[--u+t],i=r(f);(o=t<<1)<=e&&(e>o&&r(n[u+o])>r(n[u+o+1])&&o++,!(i<=r(n[u+o])));)n[u+t]=n[u+o],t=o;n[u+t]=f}return n.sort=t,n}function o(r){function n(n,e,u,o){var f,i,a,c,s=Array(o=Math.min(u-e,o));for(i=0;o>i;++i)s[i]=n[e++];if(t(s,0,o),u>e){f=r(s[0]);do(a=r(c=n[e])>f)&&(s[0]=c,f=r(t(s,0,o)[0]));while(++e<u)}return s}var t=u(r);return n}function f(r){function n(n,t,e){for(var u=t+1;e>u;++u){for(var o=u,f=n[u],i=r(f);o>t&&r(n[o-1])>i;--o)n[o]=n[o-1];n[o]=f}return n}return n}function i(r){function n(r,n,u){return(C>u-n?e:t)(r,n,u)}function t(t,e,u){var o,f=0|(u-e)/6,i=e+f,a=u-1-f,c=e+u-1>>1,s=c-f,l=c+f,h=t[i],v=r(h),p=t[s],d=r(p),y=t[c],g=r(y),b=t[l],x=r(b),m=t[a],z=r(m);v>d&&(o=h,h=p,p=o,o=v,v=d,d=o),x>z&&(o=b,b=m,m=o,o=x,x=z,z=o),v>g&&(o=h,h=y,y=o,o=v,v=g,g=o),d>g&&(o=p,p=y,y=o,o=d,d=g,g=o),v>x&&(o=h,h=b,b=o,o=v,v=x,x=o),g>x&&(o=y,y=b,b=o,o=g,g=x,x=o),d>z&&(o=p,p=m,m=o,o=d,d=z,z=o),d>g&&(o=p,p=y,y=o,o=d,d=g,g=o),x>z&&(o=b,b=m,m=o,o=x,x=z,z=o);var E=p,k=d,w=b,A=x;t[i]=h,t[s]=t[e],t[c]=y,t[l]=t[u-1],t[a]=m;var O=e+1,M=u-2,U=A>=k&&k>=A;if(U)for(var N=O;M>=N;++N){var C=t[N],S=r(C);if(k>S)N!==O&&(t[N]=t[O],t[O]=C),++O;else if(S>k)for(;;){var q=r(t[M]);{if(!(q>k)){if(k>q){t[N]=t[O],t[O++]=t[M],t[M--]=C;break}t[N]=t[M],t[M--]=C;break}M--}}}else for(var N=O;M>=N;N++){var C=t[N],S=r(C);if(k>S)N!==O&&(t[N]=t[O],t[O]=C),++O;else if(S>A)for(;;){var q=r(t[M]);{if(!(q>A)){k>q?(t[N]=t[O],t[O++]=t[M],t[M--]=C):(t[N]=t[M],t[M--]=C);break}if(M--,N>M)break}}}if(t[e]=t[O-1],t[O-1]=E,t[u-1]=t[M+1],t[M+1]=w,n(t,e,O-1),n(t,M+2,u),U)return t;if(i>O&&M>a){for(var F,q;(F=r(t[O]))<=k&&F>=k;)++O;for(;(q=r(t[M]))<=A&&q>=A;)--M;for(var N=O;M>=N;N++){var C=t[N],S=r(C);if(k>=S&&S>=k)N!==O&&(t[N]=t[O],t[O]=C),O++;else if(A>=S&&S>=A)for(;;){var q=r(t[M]);{if(!(A>=q&&q>=A)){k>q?(t[N]=t[O],t[O++]=t[M],t[M--]=C):(t[N]=t[M],t[M--]=C);break}if(M--,N>M)break}}}}return n(t,O,M+1)}var e=f(r);return n}function a(r){for(var n=Array(r),t=-1;++t<r;)n[t]=0;return n}function c(r,n){for(var t=r.length;n>t;)r[t++]=0;return r}function s(r,n){if(n>32)throw Error("invalid array width!");return r}function l(r){this.length=r,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=S(r)}function h(r,n){return function(t){var e=t.length;return[r.left(t,n,0,e),r.right(t,n,0,e)]}}function v(r,n){var t=n[0],e=n[1];return function(n){var u=n.length;return[r.left(n,t,0,u),r.left(n,e,0,u)]}}function p(r){return[0,r.length]}function d(){return null}function y(){return 0}function g(r){return r+1}function b(r){return r-1}function x(r){return function(n,t){return n+ +r(t)}}function m(r){return function(n,t){return n-r(t)}}function z(){function r(r){var n=M,t=r.length;return t&&(O=O.concat(r),s.lengthen(M+=t),N.forEach(function(e){e(r,n,t)})),z}function e(){for(var r=E(M,M),n=[],t=0,e=0;M>t;++t)s.zero(t)?n.push(t):r[t]=e++;U.forEach(function(r){r(-1,-1,[],n)}),C.forEach(function(n){n(r)});for(var t=0,e=0;M>t;++t)s.zero(t)||(t!==e&&(s.copy(e,t),O[e]=O[t]),++e);O.length=M=e,s.truncate(e)}function f(r){function e(n,e,u){V=n.map(r),W=Z(k(u),0,u),V=t(V,W);var o,f=$(V),i=f[0],a=f[1];if(X)for(o=0;u>o;++o)X(V[o],o)||(s[P][W[o]+e]|=K);else{for(o=0;i>o;++o)s[P][W[o]+e]|=K;for(o=a;u>o;++o)s[P][W[o]+e]|=K}if(!e)return Q=V,T=W,nn=i,tn=a,void 0;var c=Q,l=T,h=0,v=0;for(Q=Array(M),T=E(M,M),o=0;e>h&&u>v;++o)c[h]<V[v]?(Q[o]=c[h],T[o]=l[h++]):(Q[o]=V[v],T[o]=W[v++]+e);for(;e>h;++h,++o)Q[o]=c[h],T[o]=l[h];for(;u>v;++v,++o)Q[o]=V[v],T[o]=W[v]+e;f=$(Q),nn=f[0],tn=f[1]}function f(r,n,t){_.forEach(function(r){r(V,W,n,t)}),V=W=null}function a(r){for(var n,t=0,e=0;M>t;++t)s.zero(n=T[t])||(t!==e&&(Q[e]=Q[t]),T[e]=r[n],++e);for(Q.length=e;M>e;)T[e++]=0;var u=$(Q);nn=u[0],tn=u[1]}function c(r){var n=r[0],t=r[1];if(X)return X=null,B(function(r,e){return e>=n&&t>e}),nn=n,tn=t,Y;var e,u,o,f=[],i=[];if(nn>n)for(e=n,u=Math.min(nn,t);u>e;++e)s[P][o=T[e]]^=K,f.push(o);else if(n>nn)for(e=nn,u=Math.min(n,tn);u>e;++e)s[P][o=T[e]]^=K,i.push(o);if(t>tn)for(e=Math.max(n,tn),u=t;u>e;++e)s[P][o=T[e]]^=K,f.push(o);else if(tn>t)for(e=Math.max(nn,t),u=tn;u>e;++e)s[P][o=T[e]]^=K,i.push(o);return nn=n,tn=t,U.forEach(function(r){r(K,P,f,i)}),Y}function l(r){return null==r?q():Array.isArray(r)?S(r):"function"==typeof r?F(r):z(r)}function z(r){return c(($=h(A,r))(Q))}function S(r){return c(($=v(A,r))(Q))}function q(){return c(($=p)(Q))}function F(r){return $=p,B(X=r),nn=0,tn=M,Y}function B(r){var n,t,e,u=[],o=[];for(n=0;M>n;++n)!(s[P][t=T[n]]&K)^!!(e=r(Q[n],n))&&(e?(s[P][t]&=L,u.push(t)):(s[P][t]|=K,o.push(t)));U.forEach(function(r){r(K,P,u,o)})}function D(r){for(var n,t=[],e=tn;--e>=nn&&r>0;)s.zero(n=T[e])&&(t.push(O[n]),--r);return t}function G(r){for(var n,t=[],e=nn;tn>e&&r>0;)s.zero(n=T[e])&&(t.push(O[n]),--r),e++;return t}function H(r){function t(n,t,e,u){function o(){++X===W&&(x=j(x,V<<=1),B=j(B,V),W=w(V))}var l,h,v,p,y,g,b=F,x=E(X,W),m=H,z=J,k=X,A=0,N=0;for($&&(m=z=d),F=Array(X),X=0,B=k>1?R(B,M):E(M,W),k&&(v=(h=b[0]).key);u>N&&!((p=r(n[N]))>=p);)++N;for(;u>N;){for(h&&p>=v?(y=h,g=v,x[A]=X,(h=b[++A])&&(v=h.key)):(y={key:p,value:z()},g=p),F[X]=y;!(p>g||(B[l=t[N]+e]=X,s.zeroExcept(l,P,L)&&(y.value=m(y.value,O[l])),++N>=u));)p=r(n[N]);o()}for(;k>A;)F[x[A]=X]=b[A++],o();if(X>A)for(A=0;e>A;++A)B[A]=x[B[A]];l=U.indexOf(Y),X>1?(Y=f,Z=a):(!X&&nn&&(X=1,F=[{key:null,value:z()}]),1===X?(Y=i,Z=c):(Y=d,Z=d),B=null),U[l]=Y}function e(){if(X>1){for(var r=X,n=F,t=E(r,r),e=0,u=0;M>e;++e)s.zero(e)||(t[B[u]=B[e]]=1,++u);for(F=[],X=0,e=0;r>e;++e)t[e]&&(t[e]=X++,F.push(n[e]));if(X>1)for(var e=0;u>e;++e)B[e]=t[B[e]];else B=null;U[U.indexOf(Y)]=X>1?(Z=a,Y=f):1===X?(Z=c,Y=i):Z=Y=d}else if(1===X){if(nn)return;for(var e=0;M>e;++e)if(!s.zero(e))return;F=[],X=0,U[U.indexOf(Y)]=Y=Z=d}}function f(r,n,t,e){if(!(r===K&&n===P||$)){var u,o,f,i;for(u=0,f=t.length;f>u;++u)s.zeroExcept(o=t[u],P,L)&&(i=F[B[o]],i.value=H(i.value,O[o]));for(u=0,f=e.length;f>u;++u)s.onlyExcept(o=e[u],P,L,n,r)&&(i=F[B[o]],i.value=I(i.value,O[o]))}}function i(r,n,t,e){if(!(r===K&&n===P||$)){var u,o,f,i=F[0];for(u=0,f=t.length;f>u;++u)s.zeroExcept(o=t[u],P,L)&&(i.value=H(i.value,O[o]));for(u=0,f=e.length;f>u;++u)s.onlyExcept(o=e[u],P,L,n,r)&&(i.value=I(i.value,O[o]))}}function a(){var r,n;for(r=0;X>r;++r)F[r].value=J();for(r=0;M>r;++r)s.zeroExcept(r,P,L)&&(n=F[B[r]],n.value=H(n.value,O[r]))}function c(){var r,n=F[0];for(n.value=J(),r=0;M>r;++r)s.zeroExcept(r,P,L)&&(n.value=H(n.value,O[r]))}function l(){return $&&(Z(),$=!1),F}function h(r){var n=D(l(),0,F.length,r);return G.sort(n,0,n.length)}function v(r,n,t){return H=r,I=n,J=t,$=!0,q}function p(){return v(g,b,y)}function z(r){return v(x(r),m(r),y)}function k(r){function n(n){return r(n.value)}return D=o(n),G=u(n),q}function A(){return k(n)}function N(){return X}function S(){var r=U.indexOf(Y);return r>=0&&U.splice(r,1),r=_.indexOf(t),r>=0&&_.splice(r,1),r=C.indexOf(e),r>=0&&C.splice(r,1),q}var q={top:h,all:l,reduce:v,reduceCount:p,reduceSum:z,order:k,orderNatural:A,size:N,dispose:S,remove:S};rn.push(q);var F,B,D,G,H,I,J,V=8,W=w(V),X=0,Y=d,Z=d,$=!0,nn=r===d;return arguments.length<1&&(r=n),U.push(Y),_.push(t),C.push(e),t(Q,T,0,M),p().orderNatural()}function I(){var r=H(d),n=r.all;return delete r.all,delete r.top,delete r.order,delete r.orderNatural,delete r.size,r.value=function(){return n()[0].value},r}function J(){rn.forEach(function(r){r.dispose()});var r=N.indexOf(e);return r>=0&&N.splice(r,1),r=N.indexOf(f),r>=0&&N.splice(r,1),r=C.indexOf(a),r>=0&&C.splice(r,1),s.masks[P]&=L,q()}var K,L,P,Q,T,V,W,X,Y={filter:l,filterExact:z,filterRange:S,filterFunction:F,filterAll:q,top:D,bottom:G,group:H,groupAll:I,dispose:J,remove:J},Z=i(function(r){return V[r]}),$=p,_=[],rn=[],nn=0,tn=0;N.unshift(e),N.push(f),C.push(a);var en=s.add();return P=en.offset,K=en.one,L=~K,e(O,0,M),f(O,0,M),Y}function a(){function r(r,n){var t;if(!p)for(t=n;M>t;++t)s.zero(t)&&(a=c(a,O[t]))}function n(r,n,t,e){var u,o,f;if(!p){for(u=0,f=t.length;f>u;++u)s.zero(o=t[u])&&(a=c(a,O[o]));for(u=0,f=e.length;f>u;++u)s.only(o=e[u],n,r)&&(a=l(a,O[o]))}}function t(){var r;for(a=h(),r=0;M>r;++r)s.zero(r)&&(a=c(a,O[r]))}function e(r,n,t){return c=r,l=n,h=t,p=!0,v}function u(){return e(g,b,y)}function o(r){return e(x(r),m(r),y)}function f(){return p&&(t(),p=!1),a}function i(){var t=U.indexOf(n);return t>=0&&U.splice(t),t=N.indexOf(r),t>=0&&N.splice(t),v}var a,c,l,h,v={reduce:e,reduceCount:u,reduceSum:o,value:f,dispose:i,remove:i},p=!0;return U.push(n),N.push(r),r(O,0,M),u()}function c(){return M}var s,z={add:r,remove:e,dimension:f,groupAll:a,size:c},O=[],M=0,U=[],N=[],C=[];return s=new l(0),arguments.length?r(arguments[0]):z}function E(r,n){return(257>n?S:65537>n?q:F)(r)}function k(r){for(var n=E(r,r),t=-1;++t<r;)n[t]=t;return n}function w(r){return 8===r?256:16===r?65536:4294967296}z.version="1.3.11",z.permute=t;var A=z.bisect=e(n);A.by=e;var O=z.heap=u(n);O.by=u;var M=z.heapselect=o(n);M.by=o;var U=z.insertionsort=f(n);U.by=f;var N=z.quicksort=i(n);N.by=i;var C=32,S=a,q=a,F=a,R=c,j=s;"undefined"!=typeof Uint8Array&&(S=function(r){return new Uint8Array(r)},q=function(r){return new Uint16Array(r)},F=function(r){return new Uint32Array(r)},R=function(r,n){if(r.length>=n)return r;var t=new r.constructor(n);return t.set(r),t},j=function(r,n){var t;switch(n){case 16:t=q(r.length);break;case 32:t=F(r.length);break;default:throw Error("invalid array width!")}return t.set(r),t}),l.prototype.lengthen=function(r){for(var n=0;n<this.subarrays;n++)this[n]=R(this[n],r);this.length=r},l.prototype.add=function(){for(var r,n,t,e=0;e<this.subarrays;e++)if(r=this.masks[e],n=this.width-32*e,t=~r&-~r,!(n>=32)||t)return 32>n&&t&1<<n&&(this[e]=j(this[e],n<<=1),this.width=32*e+n),this.masks[e]|=t,{offset:e,one:t};return this[this.subarrays]=S(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},l.prototype.copy=function(r,n){for(var t=0;t<this.subarrays;t++)this[t][r]=this[t][n]},l.prototype.truncate=function(r){for(var n=0;n<this.subarrays;n++){for(var t=this.length-1;t>=r;t--)this[n][t]=0;this[n].length=r}this.length=r},l.prototype.zero=function(r){for(var n=0;n<this.subarrays;n++)if(this[n][r])return!1;return!0},l.prototype.zeroExcept=function(r,n,t){for(var e=0;e<this.subarrays;e++)if(e===n?this[e][r]&t:this[e][r])return!1;return!0},l.prototype.only=function(r,n,t){for(var e=0;e<this.subarrays;e++)if(this[e][r]!=(e===n?t:0))return!1;return!0},l.prototype.onlyExcept=function(r,n,t,e,u){for(var o,f=0;f<this.subarrays;f++)if(o=this[f][r],f===n&&(o&=t),o!=(f===e?u:0))return!1;return!0},r.crossfilter=z}("undefined"!=typeof exports&&exports||this);